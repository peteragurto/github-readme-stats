name: Sync Fork Weekly
on:
  schedule:
    - cron: "0 0 * * 0" # Ejecuta todos los domingos a las 00:00 UTC

jobs:
  sync-fork:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout cÃ³digo
        uses: actions/checkout@v4
        with:
          fetch-depth: 0 # Clona todo el historial de git

      - name: Configurar identidad de Git
        run: |
          echo "ðŸ”„ Configurando identidad global de Git"
          git config --global user.name "peteragurto"
          git config --global user.email "130622718+peteragurto@users.noreply.github.com"
          echo "âœ… Identidad global configurada."
      
      - name: Configurar upstream
        run: |
          echo "ðŸ”„ Configurando el remoto 'upstream'..."
          git remote add upstream https://github.com/anuraghazra/github-readme-stats.git
          echo "âœ… Remoto 'upstream' configurado correctamente."

      - name: Sincronizar cambios
        run: |
          echo "ðŸ”„ Sincronizando cambios desde el repositorio original..."
          git fetch upstream
          echo "âœ… Cambios descargados desde 'upstream/master'."

          echo "ðŸ”„ Cambiando a la rama 'master'..."
          git checkout master
          echo "âœ… Rama 'master' seleccionada."

          echo "ðŸ”„ Fusionando cambios desde 'upstream/master'..."
          git merge upstream/master
          echo "âœ… Cambios fusionados correctamente."

          echo "ðŸ”„ Enviando cambios a tu fork..."
          git push origin master
          echo "âœ… Cambios enviados a tu fork (rama 'master')."
